# 2026-02-28-2

## Date
2026-02-28

## Title
Switch Ark to root-command TUI configuration with persistent runtime settings

## Background / Issue
The CLI required `ark backup run` with command-line parameters, while the user required a one-command experience (`ark`) where all current execution options are configured in TUI before running backup.

## Actions / Outcome
- Approach 1: Wrote design and implementation plan documents in `docs/plans/` -> established approved scope and sequence.
- Approach 2: Applied TDD for new behavior (CLI root entry, config persistence, main menu orchestration) -> validated red/green cycles with focused tests.
- Final approach: Implemented `PipelineConfig`, `JSONConfigStore`, and `run_main_menu` flow, then wired root CLI to TUI execution and updated docs -> full test suite passed.

## Lessons / Refinements
- For TUI-first flows, keep CLI as a thin adapter and move mutable runtime state to an explicit config contract.
- Persisting only currently required fields (YAGNI) keeps migration risk low while preserving extension points.

## Related Commit Message
feat: make ark root command TUI-configurable

## Related Commit Hash
23327a5
